protocol = "newport-conex-agp"
doc = """
Daemon for the Newport conex-agp controllers

This daemon was specifically tested with the CONEX-AG-PR100P.
It should, in theory, work (though with other units, potentially) for other CONEX line controllers.
"""
traits = ["has-transformed-position", "has-limits", "is-homeable", "uses-uart", "is-daemon"]
hardware = ["newport:conex-ag-pr100p"]

[links]
source = "https://gitlab.com/yaq/yaqd-newport/"
bugtracker = "https://gitlab.com/yaq/yaqd-newport/issues"
manufacturer = "https://www.newport.com/c/controller-%26-stage-kits"
PR100P = "https://www.newport.com/p/CONEX-AG-PR100P"

[config]
axis.type = "int"
axis.default = 1
axis.doc = "Allows for daisy chained controllers"
units.type = "string"
units.default = "deg"
units.doc = "Units for the motor attatched to the controller"
make.defult = "newport"
model.default = "CONEX-AGP"
baud_rate.default = 921600

[state]
status.type = "string"
status.doc = "Device status, translated into text from the Tell Status (TS) command."
status.default = ""
error_code.type = "string"
error_code.doc = "Four digit code describing error conditions in the Tell Status (TS) command."
error_code.default = "0000"
reference_position.type = "float"
reference_position.doc = "Device reference position. Reports position as {absolute position} - offset"
reference_position.default = 0.0

[messages]
set_reference_position.request = [{"name"="offset", "type"="float"}]
get_reference_position.response = "float"
get_limits_relative.response = [{"type"="array", "items"="float"}]

[properties]

[properties.offset]
setter = "set_reference_position"
getter = "get_reference_position"
limits_getter = "get_limits_relative"
control_kind = "normal"
record_kind = "metadata"
type = "float"

[installation]
PyPI = "https://pypi.org/project/yaqd-newport"
conda-forge = "https://anaconda.org/conda-forge/yaqd-newport"

